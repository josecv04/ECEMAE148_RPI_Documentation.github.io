<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ECE/MAE 148 ‚Äî Raspberry Pi Setup Guide</title>
<meta name="description" content="Complete Raspberry Pi 5 setup guide for ECE/MAE 148 ‚Äî OS flashing, WiFi, SSH, system configuration, and DonkeyCar preparation.">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Sora:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<style>
:root {
  --ucsd-navy:    #002E6D;
  --ucsd-blue:    #00629B;
  --ucsd-gold:    #C69214;
  --ucsd-gold-lt: #E8B931;
  --bg:           #09111E;
  --bg2:          #0D1A2D;
  --surface:      #111F35;
  --surface2:     #162643;
  --surface3:     #1C2F50;
  --border:       #1E3355;
  --border-lt:    #2A4670;
  --text:         #DCE8F5;
  --text-muted:   #7A9EC4;
  --text-dim:     #4D6E96;
  --accent:       #00A8E8;
  --accent-glow:  rgba(0,168,232,0.15);
  --gold-glow:    rgba(198,146,20,0.18);
  --green:        #00C896;
  --yellow:       #F0B429;
  --red:          #F04E37;
  --purple:       #9B7FE8;
  --code-bg:      #060E1A;
  --code-border:  #1A2E4A;
  --sidebar-w:    290px;
  --topbar-h:     60px;
  --r:            6px;
  --font-body:    'Sora', sans-serif;
  --font-mono:    'IBM Plex Mono', monospace;
  --ease:         cubic-bezier(0.4,0,0.2,1);
}

*,*::before,*::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 15px; scroll-behavior: smooth; scroll-padding-top: calc(var(--topbar-h) + 20px); }
body { font-family: var(--font-body); background: var(--bg); color: var(--text); line-height: 1.7; min-height: 100vh; overflow-x: hidden; }

body::before {
  content: '';
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background-image:
    linear-gradient(rgba(0,98,155,0.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,98,155,0.04) 1px, transparent 1px);
  background-size: 40px 40px;
}

.topbar {
  position: fixed; top: 0; left: 0; right: 0; z-index: 200;
  height: var(--topbar-h);
  background: rgba(9,17,30,0.95);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(16px);
  display: flex; align-items: center;
  padding: 0 0 0 var(--sidebar-w);
}
.topbar-inner { display: flex; align-items: center; gap: 16px; padding: 0 32px; width: 100%; }
.topbar-brand { display: flex; align-items: center; gap: 12px; text-decoration: none; flex-shrink: 0; }
.topbar-emblem {
  width: 36px; height: 36px; background: var(--ucsd-navy);
  border: 2px solid var(--ucsd-gold); border-radius: 8px;
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.topbar-emblem svg { width: 20px; height: 20px; }
.topbar-name { font-size: 15px; font-weight: 700; color: var(--text); letter-spacing: -0.3px; }
.topbar-course { font-size: 11px; color: var(--text-muted); font-family: var(--font-mono); }
.topbar-divider { width: 1px; height: 28px; background: var(--border); flex-shrink: 0; }
.topbar-breadcrumb { font-family: var(--font-mono); font-size: 11px; color: var(--text-dim); }
.topbar-spacer { flex: 1; }

.page-switcher {
  display: flex; align-items: center; gap: 2px;
  background: var(--surface); border: 1px solid var(--border-lt);
  border-radius: 20px; padding: 3px; flex-shrink: 0;
}
.ps-link {
  font-family: var(--font-mono); font-size: 10px; font-weight: 600;
  padding: 4px 14px; border-radius: 16px; letter-spacing: 0.4px;
  text-decoration: none; color: var(--text-muted);
  transition: all 0.15s var(--ease);
}
.ps-link:hover { color: var(--text); background: rgba(255,255,255,0.06); }
.ps-link.active { background: var(--ucsd-gold); color: var(--bg); }
@media (max-width: 768px) { .page-switcher { display: none; } }
#menu-toggle {
  display: none; background: none; border: 1px solid var(--border);
  color: var(--text-muted); padding: 6px 10px; border-radius: var(--r);
  cursor: pointer; font-size: 16px; flex-shrink: 0;
}

.sidebar {
  position: fixed; top: 0; left: 0; bottom: 0; z-index: 150;
  width: var(--sidebar-w); background: var(--bg2);
  border-right: 1px solid var(--border);
  display: flex; flex-direction: column; overflow: hidden;
}
.sidebar-header {
  padding: 16px 20px; border-bottom: 1px solid var(--border);
  background: var(--ucsd-navy); flex-shrink: 0;
}
.sidebar-logo-row { display: flex; align-items: center; gap: 10px; margin-bottom: 4px; }
.sidebar-logo {
  width: 32px; height: 32px; border-radius: 6px;
  background: rgba(198,146,20,0.2); border: 1.5px solid var(--ucsd-gold);
  display: flex; align-items: center; justify-content: center;
  font-family: var(--font-mono); font-size: 12px; font-weight: 600; color: var(--ucsd-gold);
}
.sidebar-title { font-size: 13px; font-weight: 700; color: #fff; }
.sidebar-sub { font-size: 10px; color: rgba(255,255,255,0.5); font-family: var(--font-mono); margin-top: 2px; }
.sidebar-search { margin: 12px 16px; position: relative; flex-shrink: 0; }
.sidebar-search input {
  width: 100%; padding: 8px 12px 8px 32px;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--r); color: var(--text); font-family: var(--font-body);
  font-size: 12px; outline: none;
}
.sidebar-search input::placeholder { color: var(--text-dim); }
.sidebar-search input:focus { border-color: var(--border-lt); }
.sidebar-search-icon {
  position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
  color: var(--text-dim); font-size: 13px; pointer-events: none;
}
.nav-scroll { overflow-y: auto; flex: 1; padding-bottom: 40px; }
.nav-scroll::-webkit-scrollbar { width: 3px; }
.nav-scroll::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
.nav-group-label {
  font-family: var(--font-mono); font-size: 9px; font-weight: 600;
  text-transform: uppercase; letter-spacing: 1.8px;
  color: var(--text-dim); padding: 16px 20px 6px;
  display: flex; align-items: center; gap: 8px;
}
.nav-group-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }
.nav-link {
  display: flex; align-items: center; gap: 10px;
  padding: 7px 20px; text-decoration: none; color: var(--text-muted); font-size: 12.5px;
  border-left: 2px solid transparent; transition: all 0.15s var(--ease);
}
.nav-link .nl-num {
  font-family: var(--font-mono); font-size: 9px; color: var(--text-dim);
  background: var(--surface); border: 1px solid var(--border);
  padding: 1px 5px; border-radius: 3px; flex-shrink: 0;
}
.nav-link:hover { color: var(--text); background: rgba(255,255,255,0.03); border-left-color: var(--border-lt); }
.nav-link.active { color: var(--ucsd-gold-lt); border-left-color: var(--ucsd-gold); background: var(--gold-glow); }
.nav-link.active .nl-num { background: rgba(198,146,20,0.2); border-color: rgba(198,146,20,0.3); color: var(--ucsd-gold); }
.nav-progress { padding: 12px 20px; border-top: 1px solid var(--border); flex-shrink: 0; }
.np-label { font-family: var(--font-mono); font-size: 10px; color: var(--text-dim); margin-bottom: 6px; display: flex; justify-content: space-between; }
.np-bar { height: 3px; background: var(--border); border-radius: 3px; overflow: hidden; }
.np-fill { height: 100%; background: linear-gradient(90deg, var(--ucsd-gold), var(--ucsd-gold-lt)); border-radius: 3px; width: 0%; transition: width 0.4s var(--ease); }

.layout { display: flex; padding-top: var(--topbar-h); min-height: 100vh; }
.main { margin-left: var(--sidebar-w); flex: 1; min-width: 0; position: relative; z-index: 1; }

.hero {
  background:
    radial-gradient(ellipse 80% 100% at 100% 50%, rgba(0,98,155,0.25), transparent),
    radial-gradient(ellipse 50% 80% at 0% 0%, rgba(198,146,20,0.08), transparent),
    linear-gradient(180deg, var(--bg2) 0%, var(--bg) 100%);
  border-bottom: 1px solid var(--border);
  padding: 72px 80px 60px; position: relative; overflow: hidden;
}
.hero::before {
  content: ''; position: absolute; top: -40px; right: -40px;
  width: 400px; height: 400px; border-radius: 50%;
  background: radial-gradient(circle, rgba(0,168,232,0.07), transparent 70%);
  pointer-events: none;
}
.hero-eyebrow {
  display: inline-flex; align-items: center; gap: 8px; margin-bottom: 20px;
  font-family: var(--font-mono); font-size: 11px; font-weight: 600;
  color: var(--ucsd-gold); letter-spacing: 1px;
  background: var(--gold-glow); border: 1px solid rgba(198,146,20,0.3);
  padding: 5px 14px; border-radius: 20px;
}
.hero-eyebrow-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--ucsd-gold); }
.hero h1 { font-size: clamp(32px, 4.5vw, 56px); font-weight: 800; line-height: 1.08; letter-spacing: -1.5px; margin-bottom: 20px; color: var(--text); }
.hero h1 span { color: var(--ucsd-gold); }
.hero-desc { font-size: 16px; color: var(--text-muted); max-width: 640px; line-height: 1.65; margin-bottom: 36px; }
.hero-chips { display: flex; flex-wrap: wrap; gap: 10px; }
.hero-chip {
  display: inline-flex; align-items: center; gap: 7px;
  background: var(--surface); border: 1px solid var(--border-lt);
  color: var(--text-muted); font-size: 12px; font-family: var(--font-mono);
  padding: 6px 14px; border-radius: 20px;
}
.hero-chip-icon { font-size: 14px; }

.content { padding: 0 80px 80px; }

.section { padding-top: 64px; }
.section-anchor {
  display: block;
  visibility: hidden;
  height: 0;
  margin-top: calc(-1 * (var(--topbar-h) + 24px));
  padding-top: calc(var(--topbar-h) + 24px);
}
.sec-header {
  display: flex; align-items: flex-start; gap: 20px;
  margin-bottom: 28px; padding-bottom: 20px;
  border-bottom: 1px solid var(--border);
}
.sec-num {
  font-family: var(--font-mono); font-size: 11px; font-weight: 600;
  color: var(--ucsd-gold); background: var(--gold-glow);
  border: 1px solid rgba(198,146,20,0.3);
  padding: 4px 12px; border-radius: 20px; flex-shrink: 0; margin-top: 4px;
}
.sec-title-block { flex: 1; }
.sec-title-block h2 { font-size: 24px; font-weight: 700; color: var(--text); letter-spacing: -0.5px; line-height: 1.2; }
.sec-title-block .sec-subtitle { font-size: 13px; color: var(--text-muted); margin-top: 4px; }
.sec-badges { display: flex; gap: 6px; margin-left: auto; flex-shrink: 0; align-items: center; }

h3 { font-size: 15px; font-weight: 600; color: var(--accent); margin: 28px 0 10px; letter-spacing: -0.2px; }
h4 { font-size: 13px; font-weight: 600; color: var(--text-muted); margin: 18px 0 8px; text-transform: uppercase; letter-spacing: 0.5px; }
p { color: var(--text-muted); margin-bottom: 14px; font-size: 14px; line-height: 1.75; }
p strong { color: var(--text); font-weight: 600; }
p code, li code {
  font-family: var(--font-mono); font-size: 12px;
  background: rgba(0,168,232,0.1); color: var(--accent);
  padding: 1px 5px; border-radius: 3px;
}

.badge { font-family: var(--font-mono); font-size: 9px; font-weight: 700; padding: 3px 9px; border-radius: 3px; letter-spacing: 0.8px; text-transform: uppercase; }
.badge-new    { background: rgba(155,127,232,0.2); color: var(--purple); border: 1px solid rgba(155,127,232,0.3); }
.badge-fix    { background: rgba(0,200,150,0.15); color: var(--green); border: 1px solid rgba(0,200,150,0.3); }
.badge-warn   { background: rgba(240,78,55,0.15); color: var(--red); border: 1px solid rgba(240,78,55,0.3); }
.badge-critical { background: rgba(240,78,55,0.2); color: #ff7b6e; border: 1px solid rgba(240,78,55,0.4); }

.callout { display: flex; gap: 14px; padding: 16px 18px; border-radius: var(--r); margin: 16px 0; border: 1px solid; font-size: 13.5px; }
.callout-icon { font-size: 16px; flex-shrink: 0; line-height: 1.4; }
.callout-body { flex: 1; min-width: 0; }
.callout-title { font-size: 11px; font-weight: 700; letter-spacing: 0.8px; text-transform: uppercase; margin-bottom: 5px; }
.callout-text { color: var(--text-muted); line-height: 1.65; }
.callout-text code { font-family: var(--font-mono); font-size: 11.5px; background: rgba(255,255,255,0.07); color: var(--text); padding: 1px 5px; border-radius: 3px; }
.callout.info  { background: rgba(0,168,232,0.07); border-color: rgba(0,168,232,0.25); }
.callout.info  .callout-title { color: var(--accent); }
.callout.warn  { background: rgba(240,180,41,0.07); border-color: rgba(240,180,41,0.28); }
.callout.warn  .callout-title { color: var(--yellow); }
.callout.tip   { background: rgba(0,200,150,0.07); border-color: rgba(0,200,150,0.25); }
.callout.tip   .callout-title { color: var(--green); }
.callout.error { background: rgba(240,78,55,0.07); border-color: rgba(240,78,55,0.28); }
.callout.error .callout-title { color: var(--red); }
.callout.new   { background: rgba(155,127,232,0.07); border-color: rgba(155,127,232,0.28); }
.callout.new   .callout-title { color: var(--purple); }

.cb { background: var(--code-bg); border: 1px solid var(--code-border); border-radius: var(--r); margin: 12px 0; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.3); }
.cb-header { display: flex; align-items: center; justify-content: space-between; padding: 9px 14px; background: var(--surface); border-bottom: 1px solid var(--code-border); }
.cb-label { font-family: var(--font-mono); font-size: 10.5px; color: var(--text-dim); display: flex; align-items: center; gap: 8px; }
.cb-label::before { content: ''; display: inline-block; width: 7px; height: 7px; border-radius: 50%; background: var(--ucsd-gold); opacity: 0.7; }
.copy-btn { font-family: var(--font-mono); font-size: 9.5px; font-weight: 600; background: var(--surface2); border: 1px solid var(--border-lt); color: var(--text-dim); padding: 4px 12px; border-radius: 4px; cursor: pointer; transition: all 0.15s var(--ease); letter-spacing: 0.5px; }
.copy-btn:hover { background: var(--border); color: var(--text); }
.copy-btn.ok { color: var(--green); border-color: rgba(0,200,150,0.4); }
pre { padding: 18px 20px; overflow-x: auto; font-family: var(--font-mono); font-size: 12.5px; line-height: 1.7; tab-size: 2; color: #C9D8EC; }
pre::-webkit-scrollbar { height: 3px; }
pre::-webkit-scrollbar-thumb { background: var(--border); }
.k  { color: #6BBFFF; }
.s  { color: #A8D8B9; }
.c  { color: #4D6E96; font-style: italic; }
.f  { color: #BFA0F4; }
.v  { color: #F0B429; }
.ok { color: #00C896; }
.er { color: #F04E37; }

.steps { display: flex; flex-direction: column; gap: 14px; margin: 16px 0; }
.step { display: flex; gap: 18px; padding: 20px; background: var(--surface); border: 1px solid var(--border); border-radius: var(--r); transition: border-color 0.15s var(--ease); }
.step:hover { border-color: var(--border-lt); }
.step-num { width: 30px; height: 30px; border-radius: 50%; flex-shrink: 0; background: var(--gold-glow); border: 1.5px solid rgba(198,146,20,0.45); color: var(--ucsd-gold); font-family: var(--font-mono); font-size: 11px; font-weight: 700; display: flex; align-items: center; justify-content: center; }
.step-body { flex: 1; min-width: 0; }
.step-title { font-size: 14px; font-weight: 600; color: var(--text); margin-bottom: 4px; }
.step-desc { font-size: 13px; color: var(--text-muted); line-height: 1.65; margin-bottom: 8px; }
.step-desc:last-child { margin-bottom: 0; }

.tw { overflow-x: auto; margin: 14px 0; border-radius: var(--r); border: 1px solid var(--border); }
table { width: 100%; border-collapse: collapse; font-size: 13px; }
thead tr { background: var(--surface2); }
th { text-align: left; padding: 11px 16px; font-family: var(--font-mono); font-size: 10px; font-weight: 600; color: var(--text-dim); letter-spacing: 1px; text-transform: uppercase; border-bottom: 1px solid var(--border); }
td { padding: 11px 16px; border-bottom: 1px solid var(--border); color: var(--text-muted); vertical-align: top; font-size: 13px; line-height: 1.6; }
td code { font-family: var(--font-mono); font-size: 11.5px; color: var(--accent); background: rgba(0,168,232,0.08); padding: 1px 6px; border-radius: 3px; }
td strong { color: var(--text); }
tbody tr:last-child td { border-bottom: none; }
tbody tr:hover { background: rgba(255,255,255,0.015); }

figure { margin: 20px 0; border-radius: var(--r); overflow: hidden; border: 1px solid var(--border); background: var(--surface); box-shadow: 0 8px 32px rgba(0,0,0,0.4); }
.fig-wrap { background: var(--surface2); display: flex; align-items: center; justify-content: center; padding: 16px; min-height: 100px; }
.fig-wrap img { max-width: 100%; height: auto; display: block; border-radius: 4px; }
figcaption { padding: 10px 16px; font-family: var(--font-mono); font-size: 11px; color: var(--text-dim); border-top: 1px solid var(--border); display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.fig-label { color: var(--ucsd-gold); font-weight: 600; }

.divider { height: 1px; background: var(--border); margin: 48px 0; }

#btt { position: fixed; bottom: 28px; right: 28px; z-index: 190; width: 42px; height: 42px; border-radius: 50%; background: var(--surface2); border: 1px solid var(--border-lt); color: var(--text-muted); font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; opacity: 0; transition: all 0.2s var(--ease); pointer-events: none; box-shadow: 0 4px 16px rgba(0,0,0,0.4); }
#btt.show { opacity: 1; pointer-events: auto; }
#btt:hover { background: var(--ucsd-gold); color: var(--bg); border-color: var(--ucsd-gold); transform: translateY(-2px); }

#read-progress { position: fixed; top: 0; left: var(--sidebar-w); right: 0; height: 2px; z-index: 300; background: transparent; }
#read-progress-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--ucsd-navy), var(--ucsd-gold)); transition: width 0.1s linear; }

@media (max-width: 1024px) { .hero { padding: 48px 40px 40px; } .content { padding: 0 40px 60px; } }
@media (max-width: 768px) {
  #menu-toggle { display: flex; }
  .sidebar { transform: translateX(-100%); transition: transform 0.25s var(--ease); top: var(--topbar-h); }
  .sidebar.open { transform: translateX(0); }
  .topbar { padding-left: 0; }
  .main { margin-left: 0; }
  .hero { padding: 32px 20px 28px; }
  .content { padding: 0 20px 48px; }
  #read-progress { left: 0; }
}
</style>
</head>
<body>

<div id="read-progress"><div id="read-progress-fill"></div></div>

<header class="topbar">
  <div class="topbar-inner">
    <a href="#hero" class="topbar-brand">
      <div class="topbar-emblem">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="5" stroke="#C69214" stroke-width="2"/>
          <path d="M12 3v3M12 18v3M3 12h3M18 12h3" stroke="#C69214" stroke-width="2" stroke-linecap="round"/>
          <circle cx="12" cy="12" r="2" fill="#C69214"/>
        </svg>
      </div>
      <div>
        <div class="topbar-name">UCSD Robocar</div>
        <div class="topbar-course">ECE / MAE 148</div>
      </div>
    </a>
    <div class="topbar-divider"></div>
    <span class="topbar-breadcrumb">Raspberry Pi Setup Guide</span>
    <div class="topbar-spacer"></div>
    <div class="page-switcher">
      <a href="./rpi_setup.html" class="ps-link active">RPI Setup</a>
      <a href="./vesc_setup.html" class="ps-link">VESC Setup</a>
      <a href="./donkeycar.html" class="ps-link">DonkeyCar</a>
      <a href="./gps_laps.html" class="ps-link">GPS Laps</a>
      <a href="./index.html" class="ps-link">ROS Setup</a>
    </div>
    <button id="menu-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')">&#9776;</button>
  </div>
</header>

<nav class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <div class="sidebar-logo-row">
      <div class="sidebar-logo">RC</div>
      <div>
        <div class="sidebar-title">Robocar Docs</div>
        <div class="sidebar-sub">ECE/MAE 148 ¬∑ UCSD</div>
      </div>
    </div>
  </div>

  <div class="sidebar-search">
    <span class="sidebar-search-icon">‚åï</span>
    <input type="text" placeholder="Search sections‚Ä¶" id="nav-search" oninput="filterNav(this.value)">
  </div>

  <div class="nav-scroll" id="nav-scroll">
    <div class="nav-group-label">OS Installation</div>
    <a class="nav-link" href="#s1"><span class="nl-num">01</span>Install Raspberry Pi Imager</a>
    <a class="nav-link" href="#s2"><span class="nl-num">02</span>Flash the OS</a>
    <a class="nav-link" href="#s3"><span class="nl-num">03</span>Configure Hostname</a>
    <a class="nav-link" href="#s4"><span class="nl-num">04</span>Set Username & WiFi</a>
    <a class="nav-link" href="#s5"><span class="nl-num">05</span>Enable SSH & Write</a>

    <div class="nav-group-label">Hardware Boot</div>
    <a class="nav-link" href="#s6"><span class="nl-num">06</span>Cooling & Assembly</a>
    <a class="nav-link" href="#s7"><span class="nl-num">07</span>First Boot & SSH</a>

    <div class="nav-group-label">Network & System</div>
    <a class="nav-link" href="#s8"><span class="nl-num">08</span>WiFi Configuration</a>
    <a class="nav-link" href="#s9"><span class="nl-num">09</span>System Settings</a>
    <a class="nav-link" href="#s10"><span class="nl-num">10</span>Date & Time</a>
    <a class="nav-link" href="#s11"><span class="nl-num">11</span>GUI & Filesystem</a>

    <div class="nav-group-label">Advanced</div>
    <a class="nav-link" href="#s12"><span class="nl-num">12</span>Passwordless SSH</a>
    <a class="nav-link" href="#s13"><span class="nl-num">13</span>Backup & Troubleshooting</a>
  </div>

  <div class="nav-progress">
    <div class="np-label"><span>Reading Progress</span><span id="np-pct">0%</span></div>
    <div class="np-bar"><div class="np-fill" id="np-fill"></div></div>
  </div>
</nav>

<main class="layout">
<div class="main">

<div class="hero" id="hero">
  <div class="hero-eyebrow"><div class="hero-eyebrow-dot"></div>UCSD Jacobs School of Engineering</div>
  <h1>Raspberry Pi 5<br><span>Setup Guide</span></h1>
  <p class="hero-desc">Complete reference for ECE/MAE 148 ‚Äî covering OS flashing with the Legacy 64-bit image, hostname and WiFi configuration, hardware assembly, SSH access, system settings, date/time sync, and backup procedures for DonkeyCar 5.2.x compatibility.</p>
  <div class="hero-chips">
    <div class="hero-chip"><span class="hero-chip-icon">üçì</span>Raspberry Pi 5</div>
    <div class="hero-chip"><span class="hero-chip-icon">üíæ</span>128GB microSD</div>
    <div class="hero-chip"><span class="hero-chip-icon">üêç</span>Python 3.11</div>
    <div class="hero-chip"><span class="hero-chip-icon">üöó</span>DonkeyCar 5.2.x</div>
  </div>
</div>

<div class="content">

<!-- ¬ß1 ‚Äî Install Raspberry Pi Imager -->
<div class="section-anchor" id="s1"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">01</span>
    <div class="sec-title-block">
      <h2>Install Raspberry Pi Imager</h2>
      <div class="sec-subtitle">Download and launch the official flashing tool for your Raspberry Pi</div>
    </div>
  </div>

  <p>Raspberry Pi Imager is the official tool for writing OS images to a microSD card. It handles downloading the OS, verifying the image, writing it to your card, and applying customizations like hostname, WiFi, and SSH ‚Äî all in one place. Always use the most current version.</p>

  <p><strong>New to this?</strong> Think of the microSD card as the Pi's hard drive. Flashing the OS means copying the operating system onto that card so the Pi has something to boot from. Imager automates the entire process.</p>

  <div class="callout error">
    <div class="callout-icon">üö®</div>
    <div class="callout-body">
      <div class="callout-title">Critical ‚Äî Use Legacy 64-bit Only</div>
      <div class="callout-text">
        You <strong>must</strong> install <strong>Raspberry Pi OS (Legacy, 64-bit)</strong> ‚Äî the Debian Bookworm port. This ships with <strong>Python 3.11</strong> and is the only version compatible with <strong>DonkeyCar 5.2.x</strong>.<br><br>
        <strong>Do NOT install Debian Trixie.</strong> Trixie ships with Python 3.13, which breaks DonkeyCar and is the root cause of all camera issues reported in this class.
      </div>
    </div>
  </div>

  <div class="steps">
    <div class="step">
      <div class="step-num">1</div>
      <div class="step-body">
        <div class="step-title">Download Raspberry Pi Imager</div>
        <div class="step-desc">Navigate to the official Raspberry Pi software page and download the latest Imager for your operating system (Windows, macOS, or Linux). Install it normally like any other application.</div>
        <div class="cb"><div class="cb-header"><span class="cb-label">Official download URL</span></div><pre><span class="s">https://www.raspberrypi.com/software/</span></pre></div>
      </div>
    </div>

    <div class="step">
      <div class="step-num">2</div>
      <div class="step-body">
        <div class="step-title">Insert Your microSD Card</div>
        <div class="step-desc">Insert your <strong>128 GB microSD card</strong> into your computer using a USB hub, card adapter, or built-in slot ‚Äî whichever is available on your machine. The card must be detected by your computer before launching the Imager.</div>
      </div>
    </div>

    <div class="step">
      <div class="step-num">3</div>
      <div class="step-body">
        <div class="step-title">Select Device</div>
        <div class="step-desc">Open Raspberry Pi Imager. Under <strong>Device</strong>, choose <strong>Raspberry Pi 5</strong>. This tells the Imager which hardware you are targeting so it can select the correct kernel, firmware, and drivers for the OS image.</div>
      </div>
    </div>
  </div>

  <div class="tw"><table>
    <thead><tr><th>Setting</th><th>Value</th><th>Why</th></tr></thead>
    <tbody>
      <tr><td><strong>Device</strong></td><td>Raspberry Pi 5</td><td>Selects the correct ARM64 kernel and firmware</td></tr>
      <tr><td><strong>OS</strong></td><td>Raspberry Pi OS (Legacy, 64-bit)</td><td>Python 3.11 ‚Äî required for DonkeyCar 5.2.x</td></tr>
      <tr><td><strong>Storage</strong></td><td>Your 128 GB microSD card</td><td>Target device for the OS image</td></tr>
    </tbody>
  </table></div>
</section>

<!-- ¬ß2 ‚Äî Flash the OS -->
<div class="section-anchor" id="s2"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">02</span>
    <div class="sec-title-block">
      <h2>Flash the OS ‚Äî Choose the Correct Image</h2>
      <div class="sec-subtitle">Select Raspberry Pi OS Legacy 64-bit (Bookworm) ‚Äî not Trixie</div>
    </div>
    <div class="sec-badges"><span class="badge badge-critical">Critical</span></div>
  </div>

  <p>After selecting your device, click <strong>OS</strong> to choose the operating system. You must scroll down to find the <strong>Legacy</strong> version. The default recommended image shown at the top of the list is Trixie (Python 3.13), which will break DonkeyCar ‚Äî do not select it.</p>

  <figure>
    <div class="fig-wrap"><img src="images/fig_rpi_imager_os.png" alt="Raspberry Pi Imager OS selection showing Legacy 64-bit highlighted" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 2.1</span> Select "Raspberry Pi OS (Legacy, 64-bit)" ‚Äî the Bookworm port with Python 3.11. Do NOT select the default Trixie image shown at the top of the list.</figcaption>
  </figure>

  <div class="callout warn">
    <div class="callout-icon">‚ö†</div>
    <div class="callout-body">
      <div class="callout-title">Python Version Matters</div>
      <div class="callout-text">
        <strong>Raspberry Pi OS (Legacy, 64-bit)</strong> ‚Üí Python <strong>3.11</strong> ‚Üí DonkeyCar <strong>5.2.x works ‚úì</strong><br>
        <strong>Raspberry Pi OS (Debian Trixie)</strong> ‚Üí Python <strong>3.13</strong> ‚Üí DonkeyCar <strong>broken ‚úó / camera broken ‚úó</strong>
      </div>
    </div>
  </div>

  <h3>Why the Legacy Image?</h3>
  <p>DonkeyCar 5.2.x depends on several Python packages whose C extensions are only compiled for Python 3.11. Attempting to install them on Python 3.13 will either fail entirely or produce silent runtime errors that show up as camera failures ‚Äî the most common issue reported in this class. There is no workaround; you must use the Legacy image.</p>
</section>

<!-- ¬ß3 ‚Äî Configure Hostname -->
<div class="section-anchor" id="s3"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">03</span>
    <div class="sec-title-block">
      <h2>Configure Hostname</h2>
      <div class="sec-subtitle">Set a unique, class-standard hostname so your Pi is findable on the network</div>
    </div>
  </div>

  <p>Before writing the image, click <strong>NEXT ‚Üí Edit Settings</strong> (or the gear icon in older versions) to open the customization wizard. The first thing to set is your hostname. This is the human-readable name your Pi broadcasts on the local network ‚Äî it is how you SSH into it using <code>.local</code> address resolution instead of having to look up an IP address.</p>

  <h3>Hostname Naming Convention</h3>
  <div class="callout info">
    <div class="callout-icon">‚Ñπ</div>
    <div class="callout-body">
      <div class="callout-title">Class Standard ‚Äî Follow Exactly</div>
      <div class="callout-text">
        Format: <code>ucsdrobocar-148-XX</code> where <code>XX</code> is your two-digit team number.<br>
        Example: Team 7 ‚Üí <code>ucsdrobocar-148-07</code><br>
        TA unit: <code>ucsdrobocar-148-TA</code>
      </div>
    </div>
  </div>

  <figure>
    <div class="fig-wrap"><img src="images/fig_hostname.png" alt="Raspberry Pi Imager hostname customization screen showing ucsdrobocar-148-06" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 3.1</span> Set your hostname to <code>ucsdrobocar-148-XX</code> ‚Äî replace XX with your two-digit team number (e.g., 07 for Team 7).</figcaption>
  </figure>

  <h3>Localization Settings</h3>
  <p>On the <strong>Localization</strong> tab, set the fields below. These ensure the Pi uses the correct timezone and keyboard layout, which prevents subtle issues with scheduled tasks and terminal input.</p>

  <div class="tw"><table>
    <thead><tr><th>Field</th><th>Value</th></tr></thead>
    <tbody>
      <tr><td><strong>Capital city</strong></td><td>Washington, D.C. (United States)</td></tr>
      <tr><td><strong>Time zone</strong></td><td>America/Los_Angeles</td></tr>
      <tr><td><strong>Keyboard layout</strong></td><td>us</td></tr>
    </tbody>
  </table></div>

  <figure>
    <div class="fig-wrap"><img src="images/fig_localisation.png" alt="Raspberry Pi Imager localization screen showing US timezone and keyboard" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 3.2</span> Localization settings ‚Äî set the timezone to America/Los_Angeles and the keyboard layout to US.</figcaption>
  </figure>
</section>

<!-- ¬ß4 ‚Äî Username, Password, WiFi -->
<div class="section-anchor" id="s4"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">04</span>
    <div class="sec-title-block">
      <h2>Set Username, Password & WiFi</h2>
      <div class="sec-subtitle">Configure login credentials and pre-load the class WiFi network</div>
    </div>
  </div>

  <h3>Username & Password</h3>
  <p>On the <strong>User</strong> tab, set the username to <code>pi</code>. This is the account you will use every time you SSH into the Pi. Choose a password you will remember and share only with your team.</p>

  <figure>
    <div class="fig-wrap"><img src="images/fig_username.png" alt="Raspberry Pi Imager username screen showing pi and password fields" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 4.1</span> Set the username to <code>pi</code> and choose a secure password. The TA reference password shown here (<code>ucsd148TA</code>) is for documentation purposes only ‚Äî do not use it on your own car.</figcaption>
  </figure>

  <div class="callout warn">
    <div class="callout-icon">‚ö†</div>
    <div class="callout-body">
      <div class="callout-title">Keep Your Password Secure</div>
      <div class="callout-text">Share your password only with your team. Do not use the TA password on your car ‚Äî it is shown in this guide for reference only. Anyone who knows your password can SSH into your Pi and modify your DonkeyCar configuration.</div>
    </div>
  </div>

  <h3>WiFi Configuration</h3>
  <p>On the <strong>Wi-Fi</strong> tab, enter the class network credentials. Pre-loading WiFi here means the Pi will automatically connect to the network on its very first boot, so you can SSH in right away without needing a monitor or keyboard attached.</p>

  <figure>
    <div class="fig-wrap"><img src="images/fig_wifi.png" alt="Raspberry Pi Imager WiFi screen showing UCSDRoboCar SSID" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 4.2</span> Enter the class WiFi credentials so the Pi connects automatically on first boot. Use the credentials from the table below.</figcaption>
  </figure>

  <div class="tw"><table>
    <thead><tr><th>Location</th><th>SSID</th><th>Password</th></tr></thead>
    <tbody>
      <tr><td><strong>On-campus (class)</strong></td><td><code>UCSDRoboCar</code></td><td><code>UCSDrobocars2018</code></td></tr>
      <tr><td><strong>Home / hotspot</strong></td><td>Your network name</td><td>Your network password</td></tr>
    </tbody>
  </table></div>

  <div class="callout tip">
    <div class="callout-icon">‚úì</div>
    <div class="callout-body">
      <div class="callout-title">Pro Tip ‚Äî Add Your Phone Hotspot Later</div>
      <div class="callout-text">You can add a second WiFi network (such as your phone's hotspot) at any time after first boot via SSH. This gives you a backup connection when the class WiFi is unavailable or congested. See Section 8 for details.</div>
    </div>
  </div>
</section>

<!-- ¬ß5 ‚Äî SSH & Write -->
<div class="section-anchor" id="s5"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">05</span>
    <div class="sec-title-block">
      <h2>Enable SSH & Write the Image</h2>
      <div class="sec-subtitle">Enable remote access, then safely flash and eject the microSD card</div>
    </div>
  </div>

  <h3>Enable SSH</h3>
  <p>SSH (Secure Shell) is the protocol that lets you control the Pi remotely from your laptop over the network ‚Äî no monitor or keyboard required. On the <strong>Remote Access</strong> tab, toggle <strong>Enable SSH</strong> on and select <strong>Use password authentication</strong>. Without this step, the Pi will boot but you will have no way to connect to it.</p>

  <figure>
    <div class="fig-wrap"><img src="images/fig_ssh.png" alt="Raspberry Pi Imager SSH authentication screen with Enable SSH toggled on" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 5.1</span> Enable SSH and select "Use password authentication." This is required for all remote terminal access over WiFi.</figcaption>
  </figure>

  <h3>Raspberry Pi Connect (Optional)</h3>
  <p>The <strong>Raspberry Pi Connect</strong> tab offers a cloud-based remote desktop service from Raspberry Pi. This is not needed for this class ‚Äî leave it disabled.</p>

  <figure>
    <div class="fig-wrap"><img src="images/fig_rpi_connect.png" alt="Raspberry Pi Imager connect screen with Enable toggle off" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 5.2</span> Leave Raspberry Pi Connect disabled ‚Äî it is not used in this course.</figcaption>
  </figure>

  <h3>Review and Write</h3>
  <p>After completing all the customization tabs, the Imager will show a summary of everything you configured. Review it carefully, then click <strong>WRITE</strong>. The Imager will download the OS image (if not already cached) and flash it to your card ‚Äî this typically takes 5‚Äì15 minutes.</p>

  <figure>
    <div class="fig-wrap"><img src="images/fig_write_summary.png" alt="Raspberry Pi Imager write image summary screen showing all customizations" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 5.3</span> Review the summary to confirm your hostname, username, WiFi, and SSH settings are all correct before clicking WRITE.</figcaption>
  </figure>

  <h3>Write Complete ‚Äî Eject Safely</h3>
  <p>When writing finishes, the Imager will show a success screen. Click <strong>Finish</strong>, then follow this exact ejection sequence to avoid corrupting the card:</p>

  <div class="steps">
    <div class="step">
      <div class="step-num">1</div>
      <div class="step-body">
        <div class="step-title">Eject via Your OS First</div>
        <div class="step-desc">Use your operating system's eject function (right-click the card ‚Üí Eject on macOS/Windows, or <code>umount /dev/sdX</code> on Linux) to safely flush all pending writes to the card. Do <strong>not</strong> physically remove the card yet.</div>
      </div>
    </div>
    <div class="step">
      <div class="step-num">2</div>
      <div class="step-body">
        <div class="step-title">Physically Remove the Card</div>
        <div class="step-desc">Only after your OS confirms it is safe to remove, carefully pull out the microSD card from the adapter or slot. Skipping the software eject step can corrupt the OS files you just flashed, requiring a full re-flash.</div>
      </div>
    </div>
  </div>

  <figure>
    <div class="fig-wrap"><img src="images/fig_write_complete.png" alt="Raspberry Pi Imager write complete screen" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 5.4</span> Write complete. Click Finish, eject the card through your OS, then physically remove it.</figcaption>
  </figure>

  <div class="callout error">
    <div class="callout-icon">üö®</div>
    <div class="callout-body">
      <div class="callout-title">Do Not Skip the Software Eject</div>
      <div class="callout-text">Pulling the card out without a software eject is the most common cause of corrupted OS installations. If the card is corrupted, you will need to re-flash from scratch. Always eject through your OS first.</div>
    </div>
  </div>
</section>

<!-- ¬ß6 ‚Äî Cooling & Assembly -->
<div class="section-anchor" id="s6"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">06</span>
    <div class="sec-title-block">
      <h2>Cooling & Hardware Assembly</h2>
      <div class="sec-subtitle">Install the cooler, case, and microSD before first boot</div>
    </div>
  </div>

  <p>The Raspberry Pi 5 runs significantly hotter than previous models under sustained workloads like neural network inference. The active cooler (heatsink + fan) that comes with your kit is <strong>required</strong> ‚Äî not optional. Assemble everything before powering on for the first time.</p>

  <h3>Step-by-Step Assembly</h3>
  <div class="steps">
    <div class="step">
      <div class="step-num">1</div>
      <div class="step-body">
        <div class="step-title">Clean the Board Surface</div>
        <div class="step-desc">If the board was previously used by another team, clean the top of the processor and other chips with isopropyl alcohol wipes before applying new thermal pads. Old residue reduces thermal conductivity and can cause overheating.</div>
      </div>
    </div>

    <div class="step">
      <div class="step-num">2</div>
      <div class="step-body">
        <div class="step-title">Remove the Thermal Pad Plastic Film</div>
        <div class="step-desc">Each thermal pad ships with a thin plastic protective film on <strong>both sides</strong>. Peel off both films before mounting the cooler. This is one of the most common assembly mistakes ‚Äî if the plastic is left on, no heat will transfer and the Pi will overheat immediately under load.</div>
      </div>
    </div>

    <div class="step">
      <div class="step-num">3</div>
      <div class="step-body">
        <div class="step-title">Connect the Fan Cable</div>
        <div class="step-desc">Locate the small fan connector port on the Raspberry Pi 5 board (it has a cover that snaps off). Connect the fan cable ‚Äî the connector is keyed so it can only be inserted one way. Do not force it.</div>
      </div>
    </div>

    <div class="step">
      <div class="step-num">4</div>
      <div class="step-body">
        <div class="step-title">Install into Case</div>
        <div class="step-desc">Place the Pi into the case, aligning all port cutouts (USB, HDMI, Ethernet, USB-C power). Attach the rubber feet to the bottom. Secure the board with the provided screws and snap on the cover. Verify all ports remain accessible through the case openings.</div>
      </div>
    </div>

    <div class="step">
      <div class="step-num">5</div>
      <div class="step-body">
        <div class="step-title">Insert the microSD Card</div>
        <div class="step-desc">With the Pi seated in its case, insert the freshly flashed microSD card into the SD card slot on the underside of the board. Press it in until you feel it click firmly into place.</div>
      </div>
    </div>
  </div>

  <div class="callout info">
    <div class="callout-icon">‚Ñπ</div>
    <div class="callout-body">
      <div class="callout-title">Power Supply Requirements</div>
      <div class="callout-text">
        For initial setup, use the provided USB-C 5V/5A power supply. The Pi may show a desktop warning about power delivery ‚Äî this is harmless and expected. The Pi is looking for a USB-C PD (Power Delivery) handshake that not all power supplies support. The warning does not affect functionality and can be suppressed later in <code>raspi-config</code>.
      </div>
    </div>
  </div>
</section>

<!-- ¬ß7 ‚Äî First Boot & SSH -->
<div class="section-anchor" id="s7"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">07</span>
    <div class="sec-title-block">
      <h2>First Boot & SSH Connection</h2>
      <div class="sec-subtitle">Power on the Pi and connect remotely over WiFi</div>
    </div>
  </div>

  <p>Plug in the USB-C power supply to boot the Pi. On first boot, the Pi automatically performs initial setup tasks ‚Äî expanding the filesystem, creating your user account, and applying all the customizations you configured in the Imager. <strong>This process can take 2‚Äì5 minutes</strong> and the Pi may reboot once on its own during this time. The green activity LED on the board will flash rapidly while it works. Do not unplug it.</p>

  <h3>Connect via SSH</h3>
  <p>Once the Pi has finished its initial boot sequence and connected to your WiFi network, you can SSH into it from any device on the same network. Open a terminal on your laptop and run the command below, replacing <code>XX</code> with your two-digit team number.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Your laptop terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">ssh</span> pi@ucsdrobocar-148-XX.local

<span class="c"># Example for Team 5:</span>
<span class="k">ssh</span> pi@ucsdrobocar-148-05.local</pre></div>

  <div class="callout info">
    <div class="callout-icon">‚Ñπ</div>
    <div class="callout-body">
      <div class="callout-title">How .local Hostnames Work</div>
      <div class="callout-text">
        The <code>.local</code> suffix uses a protocol called mDNS (multicast DNS) to automatically resolve your Pi's hostname to its IP address on the local network. This means you never need to look up or remember the Pi's IP address ‚Äî as long as your laptop and the Pi are on the same WiFi network, the hostname will resolve automatically. On Windows, mDNS requires Bonjour (see troubleshooting table below if it does not work).
      </div>
    </div>
  </div>

  <h3>First Connection Security Prompt</h3>
  <p>The first time you SSH to a new Pi, your terminal will display a message asking you to verify the host's identity. This is a standard SSH security check. Type <code>yes</code> to accept and save the Pi's fingerprint ‚Äî your computer will not ask again for this host.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Expected first-connection prompt</span></div><pre><span class="c"># The authenticity of host 'ucsdrobocar-148-05.local' can't be established.</span>
<span class="c"># ECDSA key fingerprint is SHA256:xxxxxxxxxxxxxxxxxxxx.</span>
<span class="c"># Are you sure you want to continue connecting (yes/no/[fingerprint])? </span><span class="v">yes</span></pre></div>

  <h3>Troubleshooting First Boot Connection</h3>
  <div class="tw"><table>
    <thead><tr><th>Problem</th><th>Cause</th><th>Fix</th></tr></thead>
    <tbody>
      <tr><td><code>ssh: Could not resolve hostname</code></td><td>Pi has not finished booting, or mDNS is not working on your laptop</td><td>Wait 2‚Äì3 more minutes. Ensure both devices are on the same WiFi network. On Windows, install Bonjour Print Services to enable mDNS.</td></tr>
      <tr><td><code>Connection refused</code></td><td>SSH daemon has not started yet ‚Äî Pi is still booting</td><td>Wait and retry. The green activity LED should slow down or stop fast-flashing before SSH becomes available.</td></tr>
      <tr><td><code>Permission denied</code></td><td>Incorrect password</td><td>Re-check the password you set in the Imager customization step.</td></tr>
      <tr><td>Cannot find Pi at all after several minutes</td><td>WiFi credentials were entered incorrectly during flashing</td><td>Re-flash the card with the correct WiFi credentials, or temporarily connect the Pi to your router via Ethernet cable for initial setup.</td></tr>
    </tbody>
  </table></div>
</section>

<!-- ¬ß8 ‚Äî WiFi Configuration -->
<div class="section-anchor" id="s8"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">08</span>
    <div class="sec-title-block">
      <h2>WiFi Configuration</h2>
      <div class="sec-subtitle">List available networks, add additional access points, and find your IP address</div>
    </div>
  </div>

  <p>Once connected via SSH, you can manage WiFi networks directly from the command line. The Pi uses NetworkManager to handle wireless connections. You can use either <code>nmtui</code> (a simple text-based menu UI) or <code>nmcli</code> (a direct command-line tool).</p>

  <h3>List Available WiFi Networks</h3>
  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo nmcli device wifi list</span>   <span class="c"># List all visible WiFi networks</span></pre></div>

  <h3>Add a New WiFi Network via nmtui (Recommended)</h3>
  <p><code>nmtui</code> is the easiest way to add new networks because it provides an interactive menu you can navigate with arrow keys. Launch it and choose <strong>Activate a connection</strong> to connect to a visible network, or <strong>Edit a connection</strong> to add one manually (for example, a hidden SSID like your phone hotspot).</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo nmtui</span></pre></div>

  <figure>
    <div class="fig-wrap"><img src="images/fig_nmtui_activate.png" alt="nmtui text interface showing Activate a connection highlighted" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 8.1</span> In the nmtui menu, use "Activate a connection" to join a visible network, or "Edit a connection" to add a network manually by SSID and password.</figcaption>
  </figure>

  <h3>Add a Network via Command Line (Alternative)</h3>
  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="c"># Connect to a WiFi network by SSID and password</span>
<span class="k">sudo nmcli device wifi connect</span> <span class="v">"NETWORK_NAME"</span> <span class="f">password</span> <span class="v">"NETWORK_PASSWORD"</span>

<span class="c"># Class network example:</span>
<span class="k">sudo nmcli device wifi connect</span> <span class="v">"UCSDRoboCar"</span> <span class="f">password</span> <span class="v">"UCSDrobocars2018"</span></pre></div>

  <h3>Get the Pi's IP Address</h3>
  <p>If you ever need the Pi's numeric IP address (for example, to use an SSH client that does not support <code>.local</code> hostnames), run <code>ifconfig</code> and look at the <code>wlan0</code> interface. The <code>inet</code> field shows the current IPv4 address.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">ifconfig</span>
<span class="c"># Look for wlan0 ‚Üí inet field (e.g., 192.168.x.x)</span></pre></div>

  <h3>Install nano Text Editor</h3>
  <p><code>nano</code> is a simple command-line text editor that makes editing configuration files much easier than the default <code>vi</code>. Install it now ‚Äî it will be needed in later steps.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo apt-get update</span>
<span class="k">sudo apt-get install</span> nano</pre></div>
</section>

<!-- ¬ß9 ‚Äî System Settings -->
<div class="section-anchor" id="s9"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">09</span>
    <div class="sec-title-block">
      <h2>System Settings</h2>
      <div class="sec-subtitle">Change hostname, password, and system configuration with raspi-config</div>
    </div>
  </div>

  <p>If you need to change the hostname or password after flashing ‚Äî for example, if you inherited a Pi from a previous team ‚Äî use <code>raspi-config</code> or the commands below. Always follow the class hostname standard so your car is identifiable on the network.</p>

  <h3>Change Hostname with raspi-config</h3>
  <p><code>raspi-config</code> is the Raspberry Pi's built-in configuration tool. It provides a simple menu for changing common system settings. Launch it from the terminal and navigate to <strong>System Options ‚Üí S4 Hostname</strong> to update your hostname.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo raspi-config</span>
<span class="c"># Navigate: System Options ‚Üí S4 Hostname</span>
<span class="c"># Set to: ucsdrobocar-148-XX (replace XX with your team number)</span></pre></div>

  <figure>
    <div class="fig-wrap"><img src="images/fig_raspi_config.png" alt="raspi-config menu showing S4 Hostname highlighted" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 9.1</span> In raspi-config, navigate to System Options ‚Üí S4 Hostname to set the class-standard hostname.</figcaption>
  </figure>

  <h3>Change Hostname via Command Line</h3>
  <p>Alternatively, you can update the hostname directly from the terminal. You <strong>must</strong> update it in two places ‚Äî the active hostname via <code>hostnamectl</code>, and the local hosts file at <code>/etc/hosts</code>. Skipping either step will cause errors.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal ‚Äî replace xxx-yy with your class and team number</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="c"># Step 1: Set the active hostname</span>
<span class="k">sudo hostnamectl set-hostname</span> ucsdrobocar-xxx-yy

<span class="c"># Step 2: Update the hosts file to match</span>
<span class="k">sudo nano</span> /etc/hosts
<span class="c"># Find the line that reads: 127.0.1.1  old-hostname</span>
<span class="c"># Change it to:              127.0.1.1  ucsdrobocar-xxx-yy</span>
<span class="c"># Save with Ctrl-X ‚Üí Y ‚Üí Enter</span></pre></div>

  <div class="callout warn">
    <div class="callout-icon">‚ö†</div>
    <div class="callout-body">
      <div class="callout-title">Update Both Files</div>
      <div class="callout-text">If you only run <code>hostnamectl set-hostname</code> without updating <code>/etc/hosts</code>, every <code>sudo</code> command will print the warning: <em>"sudo: unable to resolve host ucsdrobocar-xxx-yy"</em>. This does not break anything, but it clutters your terminal output. Update both files to avoid it.</div>
    </div>
  </div>

  <h3>Change Password</h3>
  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">passwd</span>   <span class="c"># Changes the password for the current user (pi)</span></pre></div>

  <h3>View Current System Information</h3>
  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">hostnamectl</span>   <span class="c"># Shows hostname, OS version, kernel, and architecture</span></pre></div>

  <h3>Reboot to Apply All Changes</h3>
  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo reboot now</span></pre></div>
</section>

<!-- ¬ß10 ‚Äî Date & Time -->
<div class="section-anchor" id="s10"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">10</span>
    <div class="sec-title-block">
      <h2>Date & Time Configuration</h2>
      <div class="sec-subtitle">Ensure the system clock is correct, or software installs will fail</div>
    </div>
  </div>

  <p>The Raspberry Pi 5 does not have a battery-backed real-time clock (RTC), meaning it loses track of the current time whenever it is powered off and disconnected from the internet. If the Pi's clock is wrong, <code>apt</code> will refuse to install packages because SSL/TLS certificates will appear to be expired or not yet valid. Always check the date before debugging installation failures.</p>

  <div class="callout warn">
    <div class="callout-icon">‚ö†</div>
    <div class="callout-body">
      <div class="callout-title">Check the Date First When Updates Fail</div>
      <div class="callout-text">If <code>apt update</code> or <code>pip install</code> fails with SSL or certificate errors, the system clock is almost certainly wrong. Run <code>date</code> to check it before asking for help or debugging further.</div>
    </div>
  </div>

  <h3>Check the Current Date</h3>
  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">date</span>   <span class="c"># Prints the current system date and time</span></pre></div>

  <h3>Manually Set Date and Time</h3>
  <p>If the Pi is not yet connected to the internet or NTP has not synced, set the time manually using the command below. Replace the timestamp with the current date and time.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo date -s</span> <span class="s">'2025-09-15 10:30:00'</span>   <span class="c"># Replace with current date/time</span></pre></div>

  <h3>Set the Timezone</h3>
  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo dpkg-reconfigure tzdata</span>
<span class="c"># Navigate: America ‚Üí Los_Angeles</span></pre></div>

  <h3>Install NTP for Automatic Time Sync</h3>
  <p>NTP (Network Time Protocol) automatically synchronizes the system clock with internet time servers whenever the Pi has a network connection. Install it once and it will keep the clock correct on every subsequent boot.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo apt-get update</span>
<span class="k">sudo apt-get install</span> ntp

<span class="c"># Force an immediate time sync:</span>
<span class="k">sudo /etc/init.d/ntp stop</span>
<span class="k">sudo ntpd -q -g</span>
<span class="k">sudo /etc/init.d/ntp start</span>

<span class="c"># Reboot to confirm the time persists correctly:</span>
<span class="k">sudo reboot now</span></pre></div>

  <div class="callout tip">
    <div class="callout-icon">‚úì</div>
    <div class="callout-body">
      <div class="callout-title">Force a Re-Sync Anytime</div>
      <div class="callout-text">If the time drifts later (for example, after the Pi was offline for an extended period), you can force a manual re-sync at any time without reinstalling NTP: <code>sudo ntpd -q -g</code></div>
    </div>
  </div>
</section>

<!-- ¬ß11 ‚Äî GUI & Filesystem -->
<div class="section-anchor" id="s11"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">11</span>
    <div class="sec-title-block">
      <h2>GUI Settings & Filesystem Expansion</h2>
      <div class="sec-subtitle">Disable the desktop GUI to free RAM, and expand the filesystem to use the full SD card</div>
    </div>
  </div>

  <h3>Disable the GUI on Boot (Optional but Recommended)</h3>
  <p>Since you interact with the Pi exclusively over SSH, the desktop graphical environment (GUI) runs in the background doing nothing useful ‚Äî consuming RAM and CPU that DonkeyCar's neural network inference could use instead. Disabling it is safe for headless operation and frees a noticeable amount of memory.</p>

  <div class="callout info">
    <div class="callout-icon">‚Ñπ</div>
    <div class="callout-body">
      <div class="callout-title">When You May Want to Keep the GUI</div>
      <div class="callout-text">If you are using sensors that require ROS visualization tools like RViz (for example, Intel RealSense cameras or LiDAR), keep the GUI enabled ‚Äî those tools need the X display server to render graphics. For basic DonkeyCar driving, disabling the GUI is fine.</div>
    </div>
  </div>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo raspi-config</span>
<span class="c"># Navigate: System Options ‚Üí S5 Boot ‚Üí B1 Console (Text console)</span>
<span class="c"># This sets the Pi to boot to a text terminal instead of the desktop</span></pre></div>

  <figure>
    <div class="fig-wrap"><img src="images/fig_raspi_boot.png" alt="raspi-config boot options showing B1 Console Text console highlighted" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 11.1</span> Select "B1 Console" under boot options to disable the desktop GUI on startup and free RAM for inference.</figcaption>
  </figure>

  <h3>Expand the Filesystem</h3>
  <p>When the Imager writes the OS to your 128 GB card, it only creates a partition large enough to hold the OS image itself (~2‚Äì4 GB). The rest of the card is unused unallocated space. You must expand the filesystem to claim all remaining space ‚Äî otherwise you will run out of disk space during DonkeyCar installation.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo raspi-config</span>
<span class="c"># Navigate: Advanced Options ‚Üí A1 Expand Filesystem</span>
<span class="c"># Select OK and reboot when prompted</span></pre></div>

  <figure>
    <div class="fig-wrap"><img src="images/fig_expand_fs.png" alt="raspi-config Advanced Options menu with A1 Expand Filesystem highlighted" loading="lazy"></div>
    <figcaption><span class="fig-label">Fig 11.2</span> Advanced Options ‚Üí A1 Expand Filesystem makes the entire 128 GB of your SD card available for use.</figcaption>
  </figure>

  <h3>Update and Upgrade the System</h3>
  <p>After expanding the filesystem, run a full system update to install the latest security patches and ensure all package lists are current. Do this before installing DonkeyCar.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">sudo apt update</span>      <span class="c"># Refresh package lists from the internet</span>
<span class="k">sudo apt upgrade</span>     <span class="c"># Install available package updates (press Y when prompted)</span>
<span class="k">sudo reboot now</span>      <span class="c"># Reboot to apply any kernel updates</span></pre></div>

  <div class="callout warn">
    <div class="callout-icon">‚ö†</div>
    <div class="callout-body">
      <div class="callout-title">Do NOT Run apt full-upgrade</div>
      <div class="callout-text"><code>sudo apt full-upgrade</code> can pull in kernel and firmware upgrades that break hardware compatibility with this class's software stack. Always use <code>sudo apt upgrade</code> (without "full") to install only safe package-level updates.</div>
    </div>
  </div>
</section>

<!-- ¬ß12 ‚Äî Passwordless SSH -->
<div class="section-anchor" id="s12"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">12</span>
    <div class="sec-title-block">
      <h2>Passwordless SSH (Key-Based Auth)</h2>
      <div class="sec-subtitle">Set up SSH key pairs to connect without typing a password every time</div>
    </div>
    <div class="sec-badges"><span class="badge badge-new">Optional</span></div>
  </div>

  <p>Key-based SSH authentication lets you connect to the Pi without typing a password each time. Instead of a password, your laptop uses a cryptographic key pair ‚Äî a private key that stays on your laptop and a public key stored on the Pi. When you connect, SSH verifies the keys automatically. This is both more convenient and more secure than password auth.</p>

  <h3>Step 1 ‚Äî Generate a Key Pair on Your Laptop</h3>
  <p>Run this command on your laptop (not the Pi). When prompted for a save location and passphrase, pressing Enter each time will use the default location (<code>~/.ssh/id_rsa</code>) with no passphrase ‚Äî which is fine for development.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Your laptop terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="c"># Generate an RSA key pair</span>
<span class="k">ssh-keygen -t rsa</span>
<span class="c"># Press Enter to accept the default save location (~/.ssh/id_rsa)</span>
<span class="c"># Press Enter twice to skip the passphrase (or set one if you prefer)</span></pre></div>

  <h3>Step 2 ‚Äî View Your Public Key</h3>
  <p>The public key is the part you share with other machines. Print it out so you can copy it in the next step.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Your laptop terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="c"># macOS / Linux / WSL:</span>
<span class="k">cat</span> ~/.ssh/id_rsa.pub

<span class="c"># Copy the entire output ‚Äî it starts with "ssh-rsa AAAA..."</span></pre></div>

  <h3>Step 3 ‚Äî Add the Key to the Pi's Authorized Keys</h3>
  <p>SSH into the Pi using your password (as usual), then create the <code>.ssh</code> directory and paste your public key into the <code>authorized_keys</code> file. The Pi will trust any connection that presents the matching private key.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal (SSH into Pi first, then run these commands)</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">cd</span> ~
<span class="k">mkdir</span> .ssh          <span class="c"># Safe to ignore "File exists" error if it already exists</span>
<span class="k">chmod</span> 700 .ssh
<span class="k">sudo chown</span> pi:pi .ssh
<span class="k">nano</span> .ssh/authorized_keys
<span class="c"># Paste your public key on its own line (the entire ssh-rsa AAAA... string)</span>
<span class="c"># Save: Ctrl-X ‚Üí Y ‚Üí Enter</span>
<span class="k">chmod</span> 600 .ssh/authorized_keys</pre></div>

  <h3>Step 4 ‚Äî Test the Connection</h3>
  <div class="cb"><div class="cb-header"><span class="cb-label">Your laptop terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">ssh</span> pi@ucsdrobocar-148-XX.local
<span class="c"># Should connect WITHOUT prompting for a password</span></pre></div>

  <div class="callout tip">
    <div class="callout-icon">‚úì</div>
    <div class="callout-body">
      <div class="callout-title">Bonus: Passwordless File Transfers Too</div>
      <div class="callout-text">Once key-based auth is working, tools like <code>scp</code> and <code>rsync</code> also work without passwords ‚Äî making it easy to transfer trained DonkeyCar models and collected data logs between your laptop and the Pi.</div>
    </div>
  </div>
</section>

<!-- ¬ß13 ‚Äî Backup & Troubleshooting -->
<div class="section-anchor" id="s13"></div>
<section class="section">
  <div class="sec-header">
    <span class="sec-num">13</span>
    <div class="sec-title-block">
      <h2>Backup & Troubleshooting</h2>
      <div class="sec-subtitle">Back up your configured SD card and fix the most common setup issues</div>
    </div>
  </div>

  <div class="callout new">
    <div class="callout-icon">üíæ</div>
    <div class="callout-body">
      <div class="callout-title">Back Up Your SD Card Before Continuing</div>
      <div class="callout-text">You have spent significant time configuring this Pi. Before proceeding to DonkeyCar installation, create a full backup image of your SD card. If anything goes wrong during software installation, you can restore this clean working state in minutes instead of starting the entire setup from scratch.</div>
    </div>
  </div>

  <h3>How to Back Up Your SD Card</h3>
  <p>Shut down the Pi gracefully (<code>sudo shutdown now</code>), wait for the green LED to stop blinking, then unplug power and remove the SD card. Insert it into your laptop and use a disk imaging tool to create a complete copy:</p>
  <p>On <strong>macOS or Linux</strong>, use <code>dd</code> in a terminal to write a bit-for-bit copy to a <code>.img</code> file. On <strong>Windows</strong>, use <a href="https://win32diskimager.org/" style="color: var(--accent);">Win32DiskImager</a> ‚Äî select your card as the source, choose a destination file path, and click Read.</p>

  <h3>Common Issues & Fixes</h3>
  <div class="tw"><table>
    <thead><tr><th>Problem</th><th>Cause</th><th>Fix</th></tr></thead>
    <tbody>
      <tr><td>Camera not working, all-black feed</td><td>Installed Debian Trixie (Python 3.13) instead of the Legacy image</td><td>Re-flash with <strong>Raspberry Pi OS Legacy 64-bit (Bookworm)</strong>. There is no software fix ‚Äî you must re-flash the card.</td></tr>
      <tr><td><code>apt update</code> fails with SSL or certificate errors</td><td>System clock is set to the wrong date/time</td><td>Run <code>date</code> to check. If incorrect, follow Section 10 to set the correct time and install NTP.</td></tr>
      <tr><td>Pi not found on network after reboot</td><td>WiFi credentials were entered incorrectly, or Pi is still booting</td><td>Wait 3 minutes. If still unreachable, re-check the SSID/password and re-flash, or temporarily use an Ethernet cable.</td></tr>
      <tr><td><code>sudo: unable to resolve host</code></td><td>Hostname was updated with <code>hostnamectl</code> but <code>/etc/hosts</code> was not updated to match</td><td>Edit <code>/etc/hosts</code> and update the <code>127.0.1.1</code> line to match the new hostname. See Section 9.</td></tr>
      <tr><td>No space left on device</td><td>Filesystem was not expanded after flashing</td><td>Run <code>sudo raspi-config</code> ‚Üí Advanced Options ‚Üí A1 Expand Filesystem, then reboot. See Section 11.</td></tr>
      <tr><td>Pi reboots unexpectedly under load</td><td>Power supply cannot deliver enough current ‚Äî causes a voltage brownout</td><td>Use a 5V/5A (25W+) USB-C power supply. Underpowered supplies cause the Pi to reboot during CPU-intensive tasks like inference.</td></tr>
      <tr><td>Fan not spinning</td><td>Fan cable not connected, or plastic protective film not removed from thermal pads</td><td>Power off, disassemble the cooler, remove all plastic film from both sides of each thermal pad, and reconnect the fan cable firmly.</td></tr>
      <tr><td><code>Connection refused</code> on SSH</td><td>SSH was not enabled during the Imager customization step</td><td>Re-flash and enable SSH on the Remote Access tab, or connect a keyboard and monitor and run <code>sudo raspi-config</code> ‚Üí Interface Options ‚Üí SSH.</td></tr>
    </tbody>
  </table></div>

  <h3>Verify Your Python Version</h3>
  <p>After completing setup, run the following commands to confirm you have the correct Python version and OS release for DonkeyCar compatibility.</p>

  <div class="cb"><div class="cb-header"><span class="cb-label">Pi terminal</span><button class="copy-btn" onclick="doCopy(this)">COPY</button></div><pre><span class="k">python3 --version</span>
<span class="c"># Expected output: Python 3.11.x</span>
<span class="c"># If you see Python 3.13.x ‚Äî you flashed Trixie, not Legacy. You must re-flash.</span>

<span class="k">cat /etc/os-release</span>
<span class="c"># Expected: VERSION_CODENAME=bookworm</span>
<span class="c"># If you see trixie ‚Äî you must re-flash with the Legacy 64-bit image.</span></pre></div>

  <div class="callout tip">
    <div class="callout-icon">‚úì</div>
    <div class="callout-body">
      <div class="callout-title">Setup Complete</div>
      <div class="callout-text">If <code>python3 --version</code> shows <strong>3.11.x</strong> and <code>/etc/os-release</code> shows <strong>bookworm</strong>, your Pi is correctly configured and ready for DonkeyCar installation. Proceed to the DonkeyCar guide.</div>
    </div>
  </div>

  <div class="divider"></div>
  <p style="text-align:center; font-size:13px;">UCSD Jacobs School of Engineering ‚Äî ECE/MAE 148 Intro to Autonomous Vehicles</p>
</section>

</div><!-- /content -->
</div><!-- /main -->
</main>

<button id="btt" onclick="window.scrollTo({top:0,behavior:'smooth'})" title="Back to top">‚Üë</button>

<script>
// ‚îÄ‚îÄ COPY BUTTON ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function doCopy(btn) {
  const pre = btn.closest('.cb').querySelector('pre');
  const text = pre.innerText;
  navigator.clipboard.writeText(text).then(() => {
    btn.textContent = 'COPIED ‚úì';
    btn.classList.add('ok');
    setTimeout(() => { btn.textContent = 'COPY'; btn.classList.remove('ok'); }, 2000);
  }).catch(() => {
    const ta = document.createElement('textarea');
    ta.value = text; document.body.appendChild(ta);
    ta.select(); document.execCommand('copy');
    document.body.removeChild(ta);
    btn.textContent = 'COPIED ‚úì'; btn.classList.add('ok');
    setTimeout(() => { btn.textContent = 'COPY'; btn.classList.remove('ok'); }, 2000);
  });
}

// ‚îÄ‚îÄ BACK TO TOP ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const btt = document.getElementById('btt');
window.addEventListener('scroll', () => {
  btt.classList.toggle('show', window.scrollY > 500);
});

// ‚îÄ‚îÄ READ PROGRESS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const progressFill = document.getElementById('read-progress-fill');
const npFill = document.getElementById('np-fill');
const npPct = document.getElementById('np-pct');
window.addEventListener('scroll', () => {
  const docH = document.documentElement.scrollHeight - window.innerHeight;
  const pct = docH > 0 ? Math.min(100, Math.round((window.scrollY / docH) * 100)) : 0;
  progressFill.style.width = pct + '%';
  npFill.style.width = pct + '%';
  npPct.textContent = pct + '%';
});

// ‚îÄ‚îÄ ACTIVE NAV ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const anchors = document.querySelectorAll('.section-anchor[id]');
const navLinks = document.querySelectorAll('.nav-link');
const io = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      navLinks.forEach(l => l.classList.remove('active'));
      const a = document.querySelector(`.nav-link[href="#${e.target.id}"]`);
      if (a) {
        a.classList.add('active');
      }
    }
  });
}, { rootMargin: '-60px 0px -80% 0px' });
anchors.forEach(a => io.observe(a));

// ‚îÄ‚îÄ NAV SEARCH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function filterNav(q) {
  const term = q.toLowerCase();
  document.querySelectorAll('.nav-link').forEach(l => {
    l.style.display = l.textContent.toLowerCase().includes(term) ? '' : 'none';
  });
  document.querySelectorAll('.nav-group-label').forEach(g => {
    let next = g.nextElementSibling;
    let hasVisible = false;
    while (next && !next.classList.contains('nav-group-label')) {
      if (next.style.display !== 'none') hasVisible = true;
      next = next.nextElementSibling;
    }
    g.style.display = hasVisible ? '' : 'none';
  });
}

// ‚îÄ‚îÄ MOBILE SIDEBAR CLOSE ON NAV CLICK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.querySelectorAll('.nav-link').forEach(link => {
  link.addEventListener('click', () => {
    if (window.innerWidth <= 768) {
      document.querySelector('.sidebar').classList.remove('open');
    }
  });
});
</script>
</body>
</html>
